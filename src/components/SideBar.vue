<template>
  <template v-if="isAuthenticated">
    <button data-drawer-target="default-sidebar" data-drawer-toggle="default-sidebar" aria-controls="default-sidebar"
      type="button"
      class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-gray-200"
      @click="closeSidebar">
      <span class="sr-only">Open sidebar</span>
      <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg">
        <path clip-rule="evenodd" fill-rule="evenodd"
          d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z">
        </path>
      </svg>
    </button>
    <div @click.self="toggleSidebar" class="sidebar__backdrop">
      <aside id="default-sidebar"
        class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0"
        aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50">
          <a href="#" class="flex items-center ps-2.5 mb-5">
            <img src="../assets/images/logo.png" class="h-6 me-3 sm:h-7" alt="Flowbite Logo" style="border-radius: 50%;"/>
            <span class="self-center text-xl font-semibold whitespace-nowrap">BadmintonTutor</span>
          </a>
          <ul class="space-y-2 font-medium">
            <li>
              <router-link to="/dashboard"
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900" aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                  <path
                    d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z" />
                  <path
                    d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z" />
                </svg>
                <span class="ms-3">Dashboard</span>
              </router-link>
            </li>

            <li>
              <router-link to="/training-pose"
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg fill="#636363" height="20px" width="20px" version="1.1" id="Layer_1"
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  viewBox="0 0 305.422 305.422" xml:space="preserve" stroke="#636363">
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path id="XMLID_2_"
                      d="M35.727,192.027L16.656,211.1c-21.618,21.611-22.232,56.063-1.399,78.428c0.241,0.26,0.492,0.51,0.751,0.752 c10.484,9.766,24.155,15.143,38.497,15.143c15.084,0,29.266-5.873,39.932-16.541l19.078-19.078l107.52-43.965 c0.046-0.018,0.092-0.037,0.138-0.055l57.304-23.432c18.434-7.533,24.439-19.727,26.231-28.627 c2.857-14.193-3.296-30.525-16.459-43.686c-10.889-10.889-26.24-16.379-42.33-16.133c1.202-14.109-3.35-28.625-13.729-39.859 c-0.269-0.289-0.548-0.568-0.838-0.838c-11.236-10.381-25.754-14.926-39.861-13.73c0.254-16.102-5.246-31.443-16.134-42.332 C164.32,6.107,151.056,0,138.692,0c-2.381,0-4.729,0.227-7.02,0.688c-8.901,1.793-21.095,7.797-28.632,26.242L79.657,84.281 c-0.017,0.039-0.032,0.078-0.048,0.117L35.727,192.027z M111.427,238.246l61.725-47.424l15.746,15.746L111.427,238.246z M87.778,218.584l-0.969-0.969l49.158-63.979l15.791,15.791L87.778,218.584z M67.544,193.449l31.349-76.889l15.68,15.682 L67.544,193.449z M73.222,267.668c-4.999,5-11.647,7.754-18.718,7.754c-6.549,0-12.798-2.389-17.656-6.736 c-9.397-10.49-8.99-26.365,1.02-36.373l10.606-10.605l35.355,35.355L73.222,267.668z M267.035,151.254 c6.631,6.629,8.931,13.225,8.261,16.549c-0.656,3.26-5.4,5.645-8.173,6.779l-48.112,19.672l-21.866-21.865l30.996-23.816 C242.108,141.484,258.326,142.545,267.035,151.254z M210.55,94.848c7.56,8.619,7.309,21.467-0.536,29.82l-34.264,26.326 l-21.35-21.35l26.326-34.264C189.08,87.537,201.93,87.289,210.55,94.848z M130.815,38.268c1.131-2.77,3.517-7.514,6.777-8.17 c3.318-0.668,9.919,1.629,16.548,8.26c8.71,8.711,9.772,24.93,2.682,38.896l-23.815,30.996l-21.826-21.826L130.815,38.268z">
                    </path>
                  </g>
                </svg>
                <span class="ms-3">Trainings</span>
              </router-link>
            </li>
            <li>
              <a href="http://localhost:3000/predict-with-tfjs.html" target="_self"
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                  stroke="#636363" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1"
                  viewBox="0 0 115.99 122.88">
                  <title>dialog</title>
                  <path
                    d="M17.4,0H76.75a17.45,17.45,0,0,1,17.4,17.4V55.68a17.45,17.45,0,0,1-17.4,17.4H47.16l-26,22.36a3.12,3.12,0,0,1-4.39-.35A3.06,3.06,0,0,1,16,92.86l1.36-19.78A17.45,17.45,0,0,1,0,55.68V17.4A17.45,17.45,0,0,1,17.4,0ZM66.62,31.14a6,6,0,1,1-6,6,6,6,0,0,1,6-6Zm-19.55,0a6,6,0,1,1-6,6,6,6,0,0,1,6-6Zm-19.54,0a6,6,0,1,1-6,6,6,6,0,0,1,6-6Zm74.81-3A16.87,16.87,0,0,1,116,44.67V83A16.87,16.87,0,0,1,99.18,99.77h-.61l1.41,20.4h0a2.57,2.57,0,0,1-.6,1.82,2.54,2.54,0,0,1-3.58.28L69.63,99.11H35.17l17-17.26h36a14.32,14.32,0,0,0,14.27-14.27V29.29c0-.38,0-.76,0-1.13ZM76.75,6.25H17.4A11.18,11.18,0,0,0,6.25,17.4V55.68A11.18,11.18,0,0,0,17.4,66.83h3.53a3.13,3.13,0,0,1,2.91,3.32L22.75,85.84l21.06-18.1a3.14,3.14,0,0,1,2.2-.91H76.75A11.2,11.2,0,0,0,87.9,55.68V17.4A11.2,11.2,0,0,0,76.75,6.25Z" />
                </svg>
                <span class="ms-3">Feedbacks</span>
              </a>
            </li>
            <li>
              <router-link to="/feeds" class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                  xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 117.88 122.88">
                  <title>email-symbol</title>
                  <path
                    d="M102.31,30.86,78,5.74V5.49H12.44V46h0L46.66,76.6l.15.14L58.36,87.06,105,46.36v-10l-2.64-5.49ZM64.07,28.44l.09-.41.56-2.47h6.83L67.62,44.1c-.07.33-.14.63-.19.9h0a9.34,9.34,0,0,0-.18,1.42,1.43,1.43,0,0,0,.29.94,1,1,0,0,0,.72.33c.93,0,2.14-.61,3.61-1.82a16.05,16.05,0,0,0,3.85-5,15.19,15.19,0,0,0,.47-12.71,13.86,13.86,0,0,0-3.4-4.76,16,16,0,0,0-5.5-3.15,22.48,22.48,0,0,0-7.41-1.14,25.87,25.87,0,0,0-7.73,1.11A19.49,19.49,0,0,0,46,23.41a17.46,17.46,0,0,0-4.45,5.08,22.14,22.14,0,0,0-2.4,5.84,25.72,25.72,0,0,0-.83,6.54A18.36,18.36,0,0,0,40.07,49a16.3,16.3,0,0,0,5.14,6.18,21,21,0,0,0,8.16,3.55,34.53,34.53,0,0,0,10.8.42A25.52,25.52,0,0,0,72.27,57a15.69,15.69,0,0,0,5.63-4.5h5.51a18.14,18.14,0,0,1-3.5,5,20.31,20.31,0,0,1-5.06,3.66,26.25,26.25,0,0,1-6.49,2.26,36.89,36.89,0,0,1-7.84.77,36.4,36.4,0,0,1-11.44-1.67,23.41,23.41,0,0,1-8.58-4.81,20.32,20.32,0,0,1-5.27-7.5,25.24,25.24,0,0,1-1.77-9.62A28.31,28.31,0,0,1,35.3,30.22,23.54,23.54,0,0,1,49,16.39a29.27,29.27,0,0,1,11-2,27,27,0,0,1,9,1.44A19.93,19.93,0,0,1,76,20a18.12,18.12,0,0,1,4.47,6.38A21,21,0,0,1,82,34.46a19.13,19.13,0,0,1-1.24,6.78,19.37,19.37,0,0,1-3.56,6,17.25,17.25,0,0,1-5.44,4.19A15.06,15.06,0,0,1,65,53a6.17,6.17,0,0,1-3.25-.72A3.48,3.48,0,0,1,60.22,50,12,12,0,0,1,59,51a10.61,10.61,0,0,1-1.06.68,9.49,9.49,0,0,1-2.89,1.07,9.65,9.65,0,0,1-5.67-.55A9.38,9.38,0,0,1,45,48.44a12,12,0,0,1-1.69-6.56,19.55,19.55,0,0,1,1.74-8,16.59,16.59,0,0,1,5-6.44,11.56,11.56,0,0,1,7.29-2.51A7.46,7.46,0,0,1,64,28.25l.12.19ZM49.93,41.83a7.62,7.62,0,0,0,1.29,4.76,4.1,4.1,0,0,0,3.38,1.66,5.75,5.75,0,0,0,4.28-2,10,10,0,0,0,1-1.23,10.61,10.61,0,0,0,.6-.93,13.67,13.67,0,0,0,1.2-2.74,18.71,18.71,0,0,0,1-5.66v-.07a10.84,10.84,0,0,0-.06-1.16,7.48,7.48,0,0,0-.26-1.3,5.92,5.92,0,0,0-1-1.93A4.18,4.18,0,0,0,59.84,30a4.76,4.76,0,0,0-2-.42,5.74,5.74,0,0,0-4.1,1.78,11.34,11.34,0,0,0-2.78,4.54h0l0,0a17.92,17.92,0,0,0-1,5.86Zm60.51-.26a3.59,3.59,0,0,1,2.43-.93,4,4,0,0,1,2.06.6,5.09,5.09,0,0,1,1.26,1.07,7.06,7.06,0,0,1,1.69,4.26v70.64a5.71,5.71,0,0,1-1.66,4h0a5.67,5.67,0,0,1-4,1.66H5.67a5.71,5.71,0,0,1-4-1.66h0a5.62,5.62,0,0,1-1.66-4V46.57a7.1,7.1,0,0,1,1.73-4.32,5.5,5.5,0,0,1,1.26-1,4,4,0,0,1,2-.58,3.59,3.59,0,0,1,2,.57V2.74A2.74,2.74,0,0,1,9.7,0H78.9A2.71,2.71,0,0,1,81,1l28.65,29.59a2.71,2.71,0,0,1,.78,1.9h0v.79c0,.11,0,.22,0,.34s0,.22,0,.33v7.63ZM56.52,92.74,44.9,82.36,5.49,116.9v.31a.17.17,0,0,0,0,.13h0a.22.22,0,0,0,.13,0H112.21a.22.22,0,0,0,.13,0h0a.17.17,0,0,0,0-.13V117L72.45,82,60.15,92.76h0a2.73,2.73,0,0,1-3.62,0Zm-15.73-14L5.49,47.15v62.48l35.3-30.94Zm71.6,31.06V47.12L76.6,78.39l35.79,31.36Z" />
                </svg>
                <span class="flex-1 ms-3 whitespace-nowrap">Feeds</span>
                <span v-if="userDetails?.requests?.length"
                  class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full">{{
                    userDetails?.requests?.length }}</span>
              </router-link>
            </li>
            <li>
              <router-link to="/posts" class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  id="Layer_1" x="0px" y="0px" viewBox="0 0 122.88 119.31"
                  style="enable-background:new 0 0 122.88 119.31" xml:space="preserve">
                  <g>
                    <path
                      d="M24.27,8.54h75.82c1.39,0,2.47,1.17,2.47,2.54v4.42l18.5,4.96c1.35,0.36,2.08,1.77,1.73,3.1l-20.23,75.48v17.73 c0,1.38-1.08,2.54-2.47,2.54H24.27c-1.4,0-2.47-1.17-2.47-2.54v-12.18L0.09,23.55c-0.35-1.32,0.38-2.74,1.73-3.1L21.8,15.1v-4.01 C21.8,9.72,22.88,8.54,24.27,8.54L24.27,8.54z M102.56,20v62.82l15.71-58.61l0,0L102.56,20L102.56,20z M21.8,88.37V19.6L4.61,24.21 l0,0L21.8,88.37L21.8,88.37z M47.83,0.08l20.04,5.37H51.07l-2.71-0.73l-0.2,0.73h-4.34l0.95-3.54C45.13,0.58,46.48-0.28,47.83,0.08 L47.83,0.08z M77.71,61.69l-8.43-8.09l-1.78,10.93c-0.03,0.21-0.1,0.43-0.2,0.62c-0.1,0.19-0.24,0.37-0.42,0.52 c-0.38,0.32-0.86,0.46-1.32,0.43c-0.46-0.04-0.91-0.25-1.24-0.63L51.44,50.21L37.92,62.43v4.05h48.54V52.4l-8.01,9.22 c-0.08,0.13-0.23,0.21-0.39,0.21C77.92,61.83,77.8,61.78,77.71,61.69L77.71,61.69L77.71,61.69z M78.02,56.93l8.43-10.11V33.25 H37.92v24.26c4.1-3.71,8.32-7.79,12.51-11.31c0.37-0.32,0.83-0.46,1.27-0.43c0.46,0.02,0.91,0.22,1.24,0.58l0.01,0.02 c0.02,0.02,0.04,0.04,0.06,0.07l11.52,13.63l1.71-10.51c0.09-0.48,0.36-0.88,0.73-1.15c0.37-0.26,0.84-0.4,1.33-0.32l0.05,0.01 c0.17,0.03,0.34,0.09,0.49,0.16c0.17,0.08,0.32,0.19,0.46,0.32L78.02,56.93L78.02,56.93L78.02,56.93z M69.35,33.82 c0.71,0,1.41,0.15,2.04,0.41c0.66,0.27,1.25,0.67,1.74,1.16c0.49,0.49,0.89,1.08,1.17,1.74c0.26,0.63,0.4,1.33,0.4,2.04 s-0.15,1.41-0.4,2.04c-0.27,0.66-0.67,1.25-1.16,1.74c-0.49,0.49-1.08,0.89-1.74,1.16c-0.63,0.27-1.32,0.41-2.04,0.41 c-0.71,0-1.41-0.15-2.04-0.41c-0.66-0.27-1.24-0.67-1.74-1.16c-0.49-0.49-0.89-1.08-1.17-1.74c-0.26-0.63-0.4-1.32-0.4-2.04 c0-0.71,0.15-1.41,0.4-2.04c0.27-0.66,0.67-1.25,1.16-1.74c0.49-0.49,1.08-0.89,1.74-1.16C67.94,33.96,68.63,33.82,69.35,33.82 L69.35,33.82L69.35,33.82z M70.96,37.57c-0.21-0.21-0.46-0.38-0.74-0.5c-0.26-0.11-0.56-0.17-0.87-0.17c-0.31,0-0.6,0.06-0.87,0.17 c-0.28,0.12-0.53,0.29-0.74,0.49c-0.21,0.21-0.38,0.46-0.49,0.74c-0.11,0.27-0.17,0.56-0.17,0.87c0,0.3,0.06,0.6,0.17,0.87 c0.12,0.28,0.29,0.53,0.49,0.74c0.21,0.21,0.46,0.38,0.74,0.5c0.26,0.11,0.56,0.17,0.87,0.17c0.3,0,0.6-0.06,0.87-0.17 c0.28-0.12,0.53-0.29,0.74-0.49c0.21-0.21,0.38-0.46,0.5-0.74c0.11-0.27,0.17-0.56,0.17-0.87c0-0.3-0.06-0.6-0.17-0.87 C71.34,38.03,71.17,37.78,70.96,37.57L70.96,37.57L70.96,37.57z M36.16,29.63h52.06c0.49,0,0.93,0.21,1.25,0.54 c0.32,0.32,0.51,0.78,0.51,1.27v36.85c0,0.49-0.19,0.94-0.51,1.27c-0.32,0.33-0.76,0.54-1.25,0.54H36.16 c-0.49,0-0.93-0.21-1.24-0.54c-0.32-0.32-0.51-0.78-0.51-1.27V31.44c0-0.49,0.19-0.94,0.51-1.27 C35.23,29.84,35.67,29.63,36.16,29.63L36.16,29.63L36.16,29.63z M41.54,76.05h30.72c0.29,0,0.54,0.12,0.73,0.3l0.03,0.04 c0.16,0.19,0.27,0.42,0.27,0.69v2c0,0.28-0.12,0.54-0.3,0.73c-0.19,0.19-0.44,0.3-0.73,0.3H41.54c-0.29,0-0.54-0.12-0.73-0.3 l-0.03-0.04c-0.16-0.19-0.27-0.42-0.27-0.69v-2c0-0.29,0.12-0.54,0.3-0.73C41.01,76.17,41.26,76.05,41.54,76.05L41.54,76.05 L41.54,76.05z M34.91,76.05h2.55c0.28,0,0.53,0.12,0.73,0.3c0.18,0.19,0.3,0.45,0.3,0.73v2c0,0.28-0.12,0.54-0.3,0.73 c-0.19,0.19-0.44,0.3-0.73,0.3h-2.55c-0.28,0-0.54-0.12-0.73-0.3s-0.3-0.44-0.3-0.73v-2c0-0.29,0.12-0.54,0.3-0.73 S34.63,76.05,34.91,76.05L34.91,76.05L34.91,76.05z M35.35,93.13h53.67c0.42,0,0.79,0.19,1.06,0.5c0.25,0.29,0.41,0.68,0.41,1.11 v0.4c0,0.43-0.15,0.83-0.41,1.11l-0.03,0.03c-0.26,0.29-0.63,0.46-1.03,0.46H35.35c-0.42,0-0.79-0.19-1.06-0.5 c-0.25-0.29-0.41-0.68-0.41-1.11v-0.4c0-0.43,0.16-0.83,0.41-1.11l0.03-0.03C34.59,93.31,34.94,93.13,35.35,93.13L35.35,93.13 L35.35,93.13z M35.35,84.53h53.67c0.42,0,0.79,0.19,1.06,0.5c0.25,0.29,0.41,0.68,0.41,1.11v0.4c0,0.43-0.15,0.83-0.41,1.11 l-0.03,0.03c-0.26,0.29-0.63,0.46-1.03,0.46H35.35c-0.42,0-0.79-0.19-1.06-0.5c-0.25-0.29-0.41-0.68-0.41-1.11v-0.4 c0-0.43,0.16-0.83,0.41-1.11l0.03-0.03C34.59,84.71,34.94,84.53,35.35,84.53L35.35,84.53L35.35,84.53z M98.37,12.89H26v102.08 h72.37V12.89L98.37,12.89L98.37,12.89z" />
                  </g>
                </svg>
                <span class="ms-3">My Posts</span>
              </router-link>
            </li>
            <li>
              <router-link to="/profile" class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  id="Layer_1" x="0px" y="0px" viewBox="0 0 103.24 122.88"
                  style="enable-background:new 0 0 103.24 122.88" xml:space="preserve">
                  <g>
                    <path class="st0"
                      d="M12.26,21.44C29.87,2.01,50.18-8.56,65.43,8.73c4,0.19,7.57,1.52,10.57,4.34c6.28,5.89,7.23,16.92,4.38,25.69 v7.63c1.94,1.27,3.18,3.66,3.76,6.39c0.37,1.76,0.46,3.69,0.29,5.54c-0.18,1.91-0.65,3.75-1.41,5.24c-1.09,2.15-2.75,3.66-5,3.99 c-2.2,2.34-4.35,4.84-6.28,7.26c-2.11,2.65-3.92,5.16-5.16,7.21c-0.96,1.59-0.66,2.63-0.31,3.81c0.17,0.59,0.35,1.2,0.48,1.88 c3.85,0.84,7.34,1.49,10.47,2.08c19.87,3.72,26.03,4.87,26.03,30.71c0,1.32-1.07,2.38-2.38,2.38H51.62H2.38 c-1.32,0-2.38-1.07-2.38-2.38C0,94.66,6.16,93.5,26.03,89.78c3.15-0.59,6.66-1.25,10.54-2.09c0.13-0.51,0.3-0.99,0.47-1.47 c0.4-1.14,0.8-2.28-0.37-4.2c-1.24-2.05-3.05-4.56-5.16-7.21c-1.92-2.42-4.08-4.92-6.28-7.26c-2.25-0.33-3.91-1.85-5-3.99 c-0.76-1.5-1.23-3.34-1.41-5.24c-0.18-1.85-0.08-3.78,0.29-5.54c0.57-2.72,1.8-5.09,3.72-6.37l-2.58-1.53 C19.56,37.23,21.57,23.95,12.26,21.44L12.26,21.44z M75.62,36.7c-0.43-3.15-1.25-5.79-2.42-8c-1.5-1.87-3.68-3.46-6.48-5.51 l-0.32-0.23c-0.59-0.44-1.19-0.85-1.79-1.23c-9.42,6.11-13.98,4.68-21.58,5.93c-6.89,1.13-12.48,3.69-15.41,8.37 c0,0.12,0,0.25,0,0.37v11.5c0,1.13-0.79,2.08-1.85,2.32c-0.96,0.29-1.65,1.73-2.02,3.53c-0.27,1.31-0.34,2.75-0.21,4.13 c0.13,1.32,0.43,2.56,0.93,3.53c0.44,0.87,1.01,1.46,1.67,1.47l0.14,0c0.69-0.01,1.32,0.27,1.76,0.74l0,0 c2.52,2.65,5.01,5.51,7.19,8.25c2.19,2.75,4.11,5.43,5.49,7.71c2.33,3.84,1.56,6.03,0.8,8.22c-0.22,0.63-0.44,1.27-0.44,1.87 c0,1.2-0.89,2.19-2.04,2.36c-4.59,1.03-8.59,1.78-12.13,2.44C10.64,97.5,5.18,98.53,4.79,118.12h46.83h46.83 C98.06,98.53,92.6,97.5,76.34,94.45c-3.58-0.67-7.64-1.43-12.31-2.48c-1.1-0.25-1.86-1.23-1.85-2.32h-0.01 c0-0.93-0.24-1.74-0.46-2.5c-0.65-2.23-1.23-4.21,0.81-7.58c1.38-2.28,3.3-4.96,5.49-7.71c2.18-2.74,4.67-5.6,7.19-8.25 c0.51-0.53,1.2-0.78,1.88-0.73l0.01,0c0.66-0.01,1.23-0.6,1.67-1.47c0.49-0.97,0.8-2.21,0.93-3.53c0.13-1.38,0.06-2.82-0.21-4.13 c-0.38-1.83-1.09-3.29-2.07-3.54c-1.08-0.27-1.8-1.24-1.8-2.31h0V36.7L75.62,36.7z" />
                  </g>
                </svg>
                <span class="flex-1 ms-3 whitespace-nowrap">Profile</span>
                <span v-if="userDetails?.name == ''"
                  class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-red-800 bg-red-100 rounded-full"><i
                    class="fas fa-exclamation" title="Update Your Profile!"></i></span>
              </router-link>
            </li>
            <li>
              <button @click="logoutUser"
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-amber-50 group">
                <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900"
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  id="Layer_1" x="0px" y="0px" viewBox="0 0 93.52 122.88" style="enable-background:new 0 0 93.52 122.88"
                  xml:space="preserve">
                  <g>
                    <path class="st0"
                      d="M0.46,0h13.33c0.25,0,0.46,0.21,0.46,0.46v44.21l0.29-0.3l0.08-0.08c3.18-3.48,5.78-6.26,9.1-8.14 c3.36-1.9,7.4-2.84,13.42-2.58l0.01,0c2.15,0.03,4.69,0.26,6.78,0.46c0.97,0.09,1.84,0.17,2.59,0.22 c10.16,0.67,14.92,6.01,18.62,10.17c1.63,1.84,3.05,3.42,4.57,4.15c0.72,0.34,1.85-0.14,3.14-0.68c0.78-0.33,1.6-0.68,2.47-0.91 c0.56-0.21,0.87-0.33,1.11-0.42c0.31-0.12,0.52-0.2,0.64-0.24l9.24-3.66l0.04-0.01c1.24-0.42,2.68-0.16,3.95,0.59 c0.89,0.53,1.71,1.31,2.3,2.26c0.59,0.96,0.95,2.1,0.94,3.36c-0.01,1.81-0.81,3.83-2.82,5.83c-0.09,0.09-0.19,0.15-0.3,0.18 l-9.26,3.67l0,0l-0.86,0.3c-4.96,1.76-8.55,3.03-14.84,1.48c-0.05-0.01-0.09-0.03-0.13-0.05c-4.4-1.71-6.68-4.08-8.9-6.4 l-0.33-0.34l-2.81,17.91c2.51,1.58,5.02,2.75,7.39,3.86c7.2,3.36,13.12,6.12,14.39,17.43c0.23,2.03,0.12,3.94,0.01,6.02l0,0.03 c-0.02,0.3-0.03,0.63-0.07,1.4l-0.88,21.91c-0.02,0.43-0.38,0.76-0.8,0.75l-11.13,0.03c-0.43,0-0.78-0.35-0.78-0.78 c0.12-7.55,0.34-15.46,0.73-23l0.06-1.02c0.06-1.18,0.12-2.27,0.06-3.29c-0.06-0.97-0.24-1.88-0.64-2.75l-0.11-0.23 c-0.45-0.98-0.86-1.88-1.48-2.17c-1.23-0.57-3.18-1.28-5.4-2.01c-2.54-0.84-5.38-1.68-7.88-2.39c-1.84,6.08-4.33,13.44-7,20.43 c-2.39,6.24-4.92,12.21-7.27,16.74c-0.14,0.28-0.44,0.44-0.73,0.42l-11.69,0.06c-0.43,0-0.78-0.34-0.78-0.77 c0-0.1,0.02-0.2,0.06-0.29l0,0c2.34-5.75,5.1-13.22,7.75-20.81c2.71-7.77,5.31-15.69,7.23-22.05c-1.14-1.4-2.23-2.96-2.97-4.68 c-0.82-1.9-1.22-3.96-0.81-6.17l4.01-21.66l-0.23-0.01c-1.39-0.06-2.55-0.11-3.88,0.47c-1.82,0.8-3.26,2.42-4.86,4.22 c-0.65,0.73-1.32,1.49-2.09,2.27l-0.05,0.05c-0.57,0.59-1.17,1.2-1.73,1.77l-7.08,7.15c-0.11,0.11-0.24,0.18-0.38,0.21v59.84 c0,0.25-0.21,0.46-0.46,0.46H0.46c-0.25,0-0.46-0.21-0.46-0.46V0.46C0,0.21,0.21,0,0.46,0L0.46,0z M47.34,6.41 c3.18-1.09,6.51-0.78,9.31,0.59c2.8,1.37,5.08,3.82,6.17,7c1.09,3.18,0.78,6.51-0.59,9.31c-1.37,2.8-3.82,5.08-7,6.17 c-3.18,1.09-6.51,0.78-9.31-0.59c-2.8-1.37-5.08-3.82-6.17-7c-1.09-3.18-0.78-6.51,0.59-9.31C41.71,9.78,44.15,7.5,47.34,6.41 L47.34,6.41z M3.07,39.71h3.08v14.75H3.07V39.71L3.07,39.71z" />
                  </g>
                </svg>
                <span class="flex-1 ms-3 whitespace-nowrap">Logout</span>
              </button>
            </li>
          </ul>
        </div>
      </aside>
    </div>
  </template>
</template>

<script>
import AuthService from "../js/services/auth.js";
import store from "@/js/store.js";
import { computed } from "vue";
import { useRouter } from "vue-router";

export default {
  setup() {
    const isAuthenticated = computed(() => store.getters.isAuthenticated);
    const userDetails = computed(() => store.getters.getCurrentUserDetails);
    const router = useRouter();

    const toggleSidebar = () => {
      const sidebar = document.getElementById("default-sidebar");
      sidebar.classList.toggle("-translate-x-full");
    };

    const closeSidebar = () => {
      const sidebar = document.getElementById("default-sidebar");
      sidebar.classList.remove("-translate-x-full");
    };

    const logoutUser = () => {
      AuthService.logout()
        .then((response) => {
          if (response.status === 200) {
            store.commit("setCurrentUser", null);
            console.log({ currentUser: store.getters.getCurrentUser });
            console.log("Logged out");
            router.push({ name: "SignIn" });
          }
        })
        .catch((error) => {
          console.error(error);
        });
    };
    return {
      isAuthenticated,
      logoutUser,
      toggleSidebar,
      closeSidebar,
      userDetails,
    };
  },
};
</script>

<style scoped>
/* @media screen and (max-width: 640px) {
  .sidebar__backdrop {
    width: 100vw;
    position: absolute;
    height: 100vh;
    right: 0;
    top: 0;
  }
} */
</style>
